<!-- Define Name of the Template -->

<script type="text/x-red" data-template-name="sanitizer">
 

    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <br/>

     <div class="form-row">
        <select id="node-input-optionSelected" style="width:100%; margin-right:5px;">
            <option value="firstName" data-i18n="sanitizer.firstName" >Print only First Name</option>
            <option value="middleName" data-i18n="sanitizer.middleName" >Print only Middle Name</option>
            <option value="lastName" data-i18n="sanitizer.lastName">Print only Last Name</option>
            <option value="fullName" data-i18n="sanitizer.fullName">Print all the Full Name</option>
        </select>
    </div>

</script>


<!-- Help Text provided for the Node  -->
<script type="text/x-red" data-help-name="sanitizer">                                            
   <h1> Sanitizer </h1>
   <p>The sanitizer node would take a JSON object in msg.payload, sanitize it based on user-defined configuration, and then send the sanitized object on msg.payload.</p>
   <h2> Functions that needs to be peformed by the Sanitizer <h2>
   <ul>
    <li>Apply exception handlers in the appropriate place as JSON.parse() can throw an exception.</li>
    <li>Dont make assumptions about what data is there, you must explicitly test for data before using it. </li>
    <li>Only process properties you are specifically looking for (avoiding other things that might be in the JSON).</li>
    <li>Validate all incoming data as legitimate, acceptable values.</li>
    <li>Dont put this incoming data into places where it could be further evaluated such as directly into the HTML of the page or injected directly into SQL statements without further sanitization to make sure it is safe for that environment.</li>
   <ul>
</script>


<script type="text/javascript">
    RED.nodes.registerType('sanitizer',{
        color: "#E2D96E",
        category: 'input',      // the palette category
        defaults: {             // defines the editable properties of the node
            name: {value:""},   //  along with default values.
            optionSelected: {value: "fullName", required: true}
        },
        inputs:1,               // set the number of inputs - only 0 or 1
        outputs:1,              // set the number of outputs - 0 to n
        // set the icon (held in icons dir below where you save the node)
        icon: "myicon.png",     // saved in  icons/myicon.png
        label: function() {     // sets the default label contents
            return this.name||this.topic||"sanitizer";
        },
        labelStyle: function() { // sets the class to apply to the label
            return this.name?"node_label_italic":"";
        },
        onEditPrepare: function(){

        }
    });
</script>
